# 记录

重新讲解一下我的这个项目。
首先，这个基于CNN的Planner Agent的作用主要是为了提供一个全局视角去查看舌象，提高检测的精度。首先，我手中有关于腻苔、腐苔、齿痕、裂痕、点刺等特征的精细化模型（基于CNN），精度较高，大概有80-90的精度。但是，可能存在一个问题，在非典型的样本中，例如一些极度厚的舌苔样本中，如果使用单一的小模型，有可能会将厚苔的一点褶皱误判为置信度较低的裂痕。同时，在训练单一特征的小模型的时候，使用高质量数据集进行训练。高质量训练集质量较高，但是数量较好。在训练Planner Agent的时候，使用中质量和高质量数据集进行训练，目的是尽可能利用更多的数据，学习舌象不同特征之前的共现关系。借助双层面的特征检测，全局层面+局部层面进行检测，能够提高结果的准确率。

具体来说，Planner Agent学习的联合分布概率，例如

$$
P(Feature_1, \cdots, Feature_i|Image)
$$

而高精度小模型是从“局部视角”来查看舌象，学习的是舌象的边缘分布：

$$
P(Feature_i|Image)
$$

Planner Agent 通过联合学习和规则约束， 强制输出医学逻辑上自洽的结果，一定程度上能够过滤非典型样本上产生的噪声。

另外的一点是，Planner Agent输出的是各个特征的概率，例如腻苔的概率为多少，腐苔的概率为多少，裂痕、齿痕、点刺等特征的概率分别为多少，然后根据概率来有选择性的进一步使用更加精确的小模型进行进一步验证，来最大可能的提高检测的精度。

因此，现在训练的这种方法，属于从联合概率分布的角度去查看舌象呢？